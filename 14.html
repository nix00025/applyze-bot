<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Applyze Recruiting Bot</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">
<style>
  body {
    font-family: "Poppins", sans-serif;
    background: url('applyze-bg.png') center no-repeat fixed;
    background-size: cover;
    margin: 0;
    height: 100vh;
    overflow: hidden;
  }

  /* Mission & Vision Panels */
  .info-box {
    position: absolute;
    width: 320px;
    background: rgba(255, 255, 255, 0.92);
    color: #222;
    border-radius: 16px;
    padding: 20px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.2);
    backdrop-filter: blur(4px);
  }

  .mission {
    top: 20px;
    left: 20px;
  }

  .vision {
    bottom: 20px;
    left: 20px;
  }

  .info-box h3 {
    color: #0c4bfa;
    margin-top: 0;
    margin-bottom: 8px;
  }

  .info-box p {
    font-size: 14px;
    line-height: 1.6;
  }

  /* Chatbot Styling */
  .chatbot {
    position: fixed;
    bottom: 20px;
    right: 20px;
    width: 360px;
    max-height: 520px;
    background: white;
    border-radius: 20px;
    box-shadow: 0 5px 20px rgba(0,0,0,0.3);
    display: flex;
    flex-direction: column;
    overflow: hidden;
    z-index: 1000;
  }

  .chat-header {
    background: #0c4bfa;
    color: #fff;
    padding: 12px;
    font-weight: bold;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .chat-messages {
    flex: 1;
    overflow-y: auto;
    padding: 10px;
  }

  .chat-input {
    display: flex;
    border-top: 1px solid #ddd;
  }

  .chat-input input {
    flex: 1;
    border: none;
    padding: 10px;
    outline: none;
  }

  .chat-input button {
    background: #0c4bfa;
    color: white;
    border: none;
    padding: 10px 20px;
    cursor: pointer;
  }

  .hidden { display: none; }

  .bot, .user { margin: 5px 0; }
  .bot { color: #000; }
  .user { text-align: right; color: #0c4bfa; }

  button.option {
    background: #f3f3f3;
    border: 1px solid #ccc;
    padding: 6px 10px;
    margin: 3px;
    border-radius: 5px;
    cursor: pointer;
    transition: 0.2s;
  }
  button.option:hover {
    background: #0c4bfa;
    color: #fff;
  }

  #toggleChat {
    position: fixed;
    bottom: 20px;
    right: 20px;
    background: #0c4bfa;
    color: white;
    border: none;
    border-radius: 50%;
    width: 60px;
    height: 60px;
    font-size: 28px;
    cursor: pointer;
    box-shadow: 0 4px 8px rgba(0,0,0,0.3);
  }
</style>
</head>
<body>

<!-- Mission Box -->
<div class="info-box mission">
  <h3>MISSION</h3>
  <p>To enhance the recruitment process using AI-driven applicant screening that ensures fairness and efficient hiring, and redirecting applicants to better opportunities that match their skills and potential.</p>
</div>

<!-- Vision Box -->
<div class="info-box vision">
  <h3>VISION</h3>
  <p>To become the leading recruitment partner that empowers organizations to hire smarter and faster, while helping every applicant find their best-fit career path with fairness and transparency.</p>
</div>

<!-- Chatbot Button -->
<button id="toggleChat">ðŸ’¬</button>

<!-- Chatbot Window -->
<div class="chatbot hidden" id="chatBot">
  <div class="chat-header">
    Recruiting Bot
    <span style="cursor:pointer;" id="closeChat">âœ–</span>
  </div>
  <div class="chat-messages" id="messages"></div>
  <div class="chat-input">
    <input type="text" id="userInput" placeholder="Type here..." />
    <button id="sendBtn">Send</button>
  </div>
</div>

<script>
const scriptURL = "https://script.google.com/macros/s/AKfycbwRJ28qiS_TBdFNyqLkLXBLV6Dz2CzIPrn7-nLSWry6b6jyzM6zTZdoEmNFmzxs1x73SA/exec";
let step = 0;
let applicant = {};

function showMessage(text, sender="bot") {
  const msgBox = document.getElementById("messages");
  const msg = document.createElement("div");
  msg.className = sender;
  msg.innerHTML = text;
  msgBox.appendChild(msg);
  msgBox.scrollTop = msgBox.scrollHeight;
}

function showOptions(options) {
  const msgBox = document.getElementById("messages");
  const wrapper = document.createElement("div");
  options.forEach(opt => {
    const btn = document.createElement("button");
    btn.className = "option";
    btn.textContent = opt;
    btn.onclick = () => handleResponse(opt);
    wrapper.appendChild(btn);
  });
  msgBox.appendChild(wrapper);
}

function handleResponse(input) {
  const inputBox = document.getElementById("userInput");
  if (input) showMessage(input, "user");
  inputBox.value = "";

  switch(step) {
    case 0:
      showMessage("Please select your language / Piliin ang iyong wika:");
      showOptions(["English", "Tagalog"]);
      step = 1;
      break;

    case 1:
      applicant.language = input;
      showMessage("Do you agree to our Data Privacy Consent Policy?");
      showOptions(["Yes", "No"]);
      step = 2;
      break;

    case 2:
      if (input === "No") {
        rejectApplicant();
        return;
      }
      applicant.consent = "Yes";
      showMessage("What is your First and Last Name?");
      step = 3;
      break;

    case 3:
      applicant.name = input;
      showMessage(`Hi ${input.split(" ")[0]}! Please enter your contact number.`);
      step = 4;
      break;

    case 4:
      applicant.contact = input;
      showMessage("Please enter your email address.");
      step = 5;
      break;

    case 5:
      applicant.email = input;
      showMessage("Please enter your address.");
      step = 6;
      break;

    case 6:
      applicant.address = input;
      showMessage("Select your Educational Attainment:");
      showOptions(["Elementary", "High School Graduate", "College Undergraduate", "College Graduate"]);
      step = 7;
      break;

    case 7:
      applicant.education = input;
      if (input === "Elementary") {
        rejectApplicant(); return;
      } else {
        showMessage("How long do you have relevant experience with HR work?");
        step = 9;
      }
      break;

    case 9:
      applicant.hrExp = input;
      showMessage("How long do you have relevant experience with Administrative work?");
      step = 10;
      break;

    case 10:
      applicant.adminExp = input;
      showMessage("Please enumerate your skills or certifications (N/A if none).");
      step = 11;
      break;

    case 11:
      applicant.skills = input;
      showMessage("Please select your preferred interview date:");
      const dateInput = document.createElement("input");
      dateInput.type = "date";
      dateInput.min = new Date().toISOString().split("T")[0];
      dateInput.onchange = (e) => handleResponse(e.target.value);
      document.getElementById("messages").appendChild(dateInput);
      step = 12;
      break;

    case 12:
      applicant.date = input;
      showMessage("Please select your preferred interview time:");
      const timeInput = document.createElement("input");
      timeInput.type = "time";
      timeInput.onchange = (e) => handleResponse(e.target.value);
      document.getElementById("messages").appendChild(timeInput);
      step = 13;
      break;

    case 13:
      applicant.time = input;
      showSummary();
      break;
  }
}

function rejectApplicant() {
  showMessage("Thank you for participating in our initial screening process. Unfortunately, our screening suggests that you may not be the best fit for this position or our company at this time.<br><br>We have decided to move forward with another candidate whose background matches the current needs of the position.");
  fetch(scriptURL, { method:"POST", body: JSON.stringify(applicant) });
  step = 999;
}

function showSummary() {
  showMessage("<b>Summary:</b><br>â€¢ Name: " + applicant.name + "<br>â€¢ Contact: " + applicant.contact + "<br>â€¢ Email: " + applicant.email + "<br>â€¢ Address: " + applicant.address + "<br>â€¢ Education: " + applicant.education + "<br>â€¢ HR Exp: " + applicant.hrExp + "<br>â€¢ Admin Exp: " + applicant.adminExp + "<br>â€¢ Skills: " + applicant.skills + "<br>â€¢ Interview Schedule: " + applicant.date + " " + applicant.time);
  fetch(scriptURL, { method:"POST", body: JSON.stringify(applicant) });
  showMessage("âœ… Your interview has been scheduled successfully! You and HR will receive an email confirmation.");
  step = 999;
}

/* Chatbot Toggle */
document.getElementById("sendBtn").onclick = () => {
  const val = document.getElementById("userInput").value.trim();
  if (val) handleResponse(val);
};
document.getElementById("toggleChat").onclick = () => document.getElementById("chatBot").classList.toggle("hidden");
document.getElementById("closeChat").onclick = () => document.getElementById("chatBot").classList.add("hidden");

/* Initial Greeting */
showMessage("Welcome to Applyze Recruiting Bot! Click below to start.");
showOptions(["Start"]);
</script>
</body>
</html>
